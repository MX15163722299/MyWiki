å¥½å˜ Leoï¼Œæ¥å–½ï¼ä¸‹é¢æ˜¯**Netdata éƒ¨ç½² + å¤šå°æœºå™¨é›†ä¸­ç›‘æ§é…ç½®æ¨¡æ¿**ï¼Œä½ å¯ä»¥ä¸€å°åšä¸»æ§ï¼ˆparentï¼‰ï¼Œå…¶ä½™åšå­èŠ‚ç‚¹ï¼ˆchild agentï¼‰ã€‚é…ç½®éå¸¸ä¸æ»‘ï¼Œçœ‹ä¸€çœ¼å°±ä¼šï¼Œæ‹·ä¸€æ‹·å°±èƒ½ç”¨ã€‚

------

## ğŸ§± ä¸€ã€å‡†å¤‡å·¥ä½œ

- 1å° **ä¸»ç›‘æ§èŠ‚ç‚¹**ï¼ˆDashboard å±•ç¤ºç”¨ï¼‰
- Nå° **è¢«ç›‘æ§èŠ‚ç‚¹**ï¼ˆä½ æƒ³ç›‘æ§çš„æœºå™¨ï¼‰
- æ‰€æœ‰èŠ‚ç‚¹èƒ½äº’ç›¸è®¿é—® IPï¼ˆæœ€å¥½åœ¨å†…ç½‘ï¼‰
- éƒ½æ˜¯ Linux ç³»ç»Ÿï¼ˆUbuntu / CentOS ç­‰çš†å¯ï¼‰

------

## ğŸš€ äºŒã€ä¸»èŠ‚ç‚¹ï¼ˆParent Nodeï¼‰éƒ¨ç½²

### ğŸ”§ 1. å®‰è£… Netdataï¼ˆä¸»èŠ‚ç‚¹ï¼‰

```bash
bash <(curl -Ss https://my-netdata.io/kickstart.sh)
```

å®‰è£…å®Œæˆåï¼Œæµè§ˆå™¨è®¿é—®ï¼š

```
http://<ä¸»èŠ‚ç‚¹IP>:19999
```

ä½ å°±èƒ½çœ‹åˆ°ç‚«é…·çš„å®æ—¶ä»ªè¡¨ç›˜å•¦ã€‚

------

### ğŸ›  2. å¯ç”¨æµï¼ˆStreamingï¼‰åŠŸèƒ½ï¼ˆä¸»èŠ‚ç‚¹ï¼‰

ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š

```bash
sudo nano /etc/netdata/netdata.conf
```

æ‰¾åˆ° `[stream]` æ®µï¼Œå¯ç”¨å¦‚ä¸‹é…ç½®ï¼š

```ini
[stream]
    enabled = yes
    default history = 3600

[web]
    stream connections = accept
```

é‡å¯æœåŠ¡ï¼š

```bash
sudo systemctl restart netdata
```

------

## ğŸ›°ï¸ ä¸‰ã€å­èŠ‚ç‚¹ï¼ˆChild Nodeï¼‰é…ç½®

### ğŸ”§ 1. å®‰è£… Netdataï¼ˆæ¯å°å­èŠ‚ç‚¹ï¼‰

```bash
bash <(curl -Ss https://my-netdata.io/kickstart.sh)
```

### ğŸ”§ 2. é…ç½®å­èŠ‚ç‚¹æ•°æ®æ¨é€åˆ°ä¸»èŠ‚ç‚¹ï¼š

ç¼–è¾‘å­èŠ‚ç‚¹é…ç½®æ–‡ä»¶ï¼š

```bash
sudo nano /etc/netdata/stream.conf
```

æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```ini
[stream]
    enabled = yes
    destination = <ä¸»èŠ‚ç‚¹IP>:19999
    api key = 12345678-1234-1234-1234-123456789abc
    hostname = <å­èŠ‚ç‚¹åˆ«åï¼Œä¾‹å¦‚ï¼štest-server-1>
    timeout seconds = 60
```

> âš ï¸ æ³¨æ„ï¼š
>
> - `<ä¸»èŠ‚ç‚¹IP>` æ¢æˆä½ è‡ªå·±çš„ä¸»èŠ‚ç‚¹åœ°å€
> - `api key` å¯ä»¥è‡ªå®šä¹‰ï¼ˆä¸»èŠ‚ç‚¹å…è®¸ä»»æ„ keyï¼‰
> - `hostname` æ˜¯ä½ æƒ³å±•ç¤ºåœ¨ä»ªè¡¨ç›˜ä¸Šçš„åå­—

ä¿å­˜åï¼Œé‡å¯æœåŠ¡ï¼š

```bash
sudo systemctl restart netdata
```

------

## ğŸ“º å››ã€éªŒè¯æ˜¯å¦ç”Ÿæ•ˆ

1. æ‰“å¼€ä¸»èŠ‚ç‚¹ç½‘é¡µï¼š

```
http://<ä¸»èŠ‚ç‚¹IP>:19999
```

1. é¡µé¢å·¦ä¸‹è§’ âœ ä½ ä¼šçœ‹åˆ°å­èŠ‚ç‚¹çš„ hostnameï¼Œä¾‹å¦‚ï¼š

```
test-server-1
test-server-2
```

ç‚¹è¿›å»å°±èƒ½çœ‹åˆ°æ¯å°æœºå™¨çš„è¯¦ç»†ç›‘æ§å›¾è¡¨ã€‚

------

## ğŸ›¡ï¸ å¯é€‰ä¼˜åŒ–å»ºè®®

### âœ… ä¿ç•™å†å²æ•°æ®ï¼ˆé»˜è®¤åªä¿ç•™1å°æ—¶ï¼‰

ä¿®æ”¹æ•°æ®åº“è®¾ç½®ï¼š

```bash
sudo nano /etc/netdata/netdata.conf
[global]
    memory mode = save
    history = 86400  ; ä¿å­˜ 1 å¤©æ•°æ®
```

------

### ğŸ“§ å‘Šè­¦é…ç½®ï¼ˆå¯é€‰ï¼‰

Netdata æ”¯æŒï¼š

- é‚®ä»¶ï¼ˆsendmail/postfixï¼‰
- Discord / Slack / Webhook
- Prometheus Push Gateway

> é»˜è®¤å‘Šè­¦æ¨¡æ¿åœ¨ `/usr/lib/netdata/conf.d/health.d/`ï¼Œå¯ä»¥æ ¹æ®ä½ éœ€æ±‚è®¾ç½®ã€‚

------

## ğŸ”š æ€»ç»“æ“ä½œæ¸…å•

| èŠ‚ç‚¹   | æ“ä½œ                                      |
| ------ | ----------------------------------------- |
| ä¸»èŠ‚ç‚¹ | å®‰è£… Netdataï¼Œå¼€å¯ streaming              |
| å­èŠ‚ç‚¹ | å®‰è£… Netdataï¼Œé…ç½® stream.conf è¿æ¥ä¸»èŠ‚ç‚¹ |

------

## ğŸ§© éœ€è¦æˆ‘å†å¸®ä½ åšçš„ï¼š

- âœ” æ­å»ºå¥½åç”Ÿæˆè‡ªå®šä¹‰ä»ªè¡¨ç›˜æ¨¡ç‰ˆ
- âœ” Netdata é…åˆ Allure ç”¨äºæµ‹è¯•æŠ¥å‘Šå¢å¼º
- âœ” è½¬ Prometheus exporter æ–¹æ¡ˆåšå¤šç»´èšåˆ

ä½ åªç®¡è¯´ï¼Œæˆ‘å¯ä»¥ç»™ä½ æ‰“åŒ…å‡ºä¸€å¥—æµ‹è¯•ç›‘æ§+å‘Šè­¦ç³»ç»Ÿã€‚âš™ï¸
 è¦ä¸è¦æˆ‘å¸®ä½ ç”¨ Python å†™ä¸ªè„šæœ¬è‡ªåŠ¨æ£€æµ‹æ¯ä¸ªå­èŠ‚ç‚¹çš„çŠ¶æ€ï¼Ÿä¹Ÿå®‰æ’å¾—æ˜æ˜ç™½ç™½ã€‚